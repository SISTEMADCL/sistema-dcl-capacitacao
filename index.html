<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema DCL - Capacita√ß√£o Continuada</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üèõÔ∏è</text></svg>">
    <style>
        /* ========== CONFIGURA√á√ïES PERSONALIZ√ÅVEIS ========== */
        :root {
            --cor-primaria: #667eea;
            --cor-secundaria: #764ba2;
            --cor-sucesso: #28a745;
            --cor-alerta: #ffc107;
            --cor-erro: #e74c3c;
            --fonte-principal: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        /* ========== ESTILOS B√ÅSICOS ========== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--fonte-principal);
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, var(--cor-primaria) 0%, var(--cor-secundaria) 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        /* ========== TELA DE LOGIN ========== */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .login-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            width: 100%;
            max-width: 450px;
            text-align: center;
        }
        
        .logo-container {
            margin-bottom: 20px;
        }
        
        .logo-municipio {
            max-width: 80px;
            height: 80px;
            margin: 0 auto 15px;
            display: block;
            border-radius: 10px;
        }
        
        .login-logo {
            font-size: 4em;
            margin-bottom: 10px;
        }
        
        .login-title {
            font-size: 2.2em;
            color: #2c3e50;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .login-subtitle {
            color: #666;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .municipio-info {
            color: #888;
            font-size: 0.9em;
            margin-bottom: 30px;
            padding: 10px;
            background: rgba(0,0,0,0.05);
            border-radius: 8px;
        }
        
        .form-group {
            margin-bottom: 20px;
            text-align: left;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 500;
        }
        
        .form-control {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--cor-primaria);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .btn-login {
            width: 100%;
            background: linear-gradient(135deg, var(--cor-primaria), var(--cor-secundaria));
            color: white;
            border: none;
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }
        
        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }
        
        .demo-users {
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            text-align: left;
        }
        
        .demo-users h4 {
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .demo-user {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .demo-user:last-child {
            border-bottom: none;
        }
        
        .demo-user-info {
            flex: 1;
        }
        
        .demo-user-name {
            font-weight: bold;
            color: #2c3e50;
        }
        
        .demo-user-role {
            font-size: 0.9em;
            color: #666;
        }
        
        .demo-user-login {
            background: #e9ecef;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            color: #666;
            cursor: pointer;
        }
        
        .demo-user-login:hover {
            background: #dee2e6;
        }
        
        /* ========== HEADER SISTEMA ========== */
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .header-left h1 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 5px;
        }
        
        .header-left .user-info {
            color: #666;
            font-size: 1em;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--cor-primaria), var(--cor-secundaria));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        .btn-logout {
            background: linear-gradient(135deg, var(--cor-erro), #c0392b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-logout:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(231, 76, 60, 0.4);
        }
        
        /* ========== NAVEGA√á√ÉO ========== */
        .nav-tabs {
            display: flex;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 10px;
            padding: 5px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        
        .nav-tab {
            flex: 1;
            padding: 15px 20px;
            text-align: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            color: #666;
        }
        
        .nav-tab.active {
            background: linear-gradient(135deg, var(--cor-primaria), var(--cor-secundaria));
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }
        
        /* ========== CARDS E COMPONENTES ========== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .dashboard-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .card-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .card-icon {
            font-size: 2.5em;
            margin-right: 15px;
        }
        
        .card-title {
            font-size: 1.3em;
            color: #2c3e50;
            font-weight: bold;
        }
        
        .progress-ring {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            position: relative;
        }
        
        .progress-ring svg {
            transform: rotate(-90deg);
            width: 100%;
            height: 100%;
        }
        
        .progress-ring-circle {
            fill: none;
            stroke: #e9ecef;
            stroke-width: 8;
        }
        
        .progress-ring-progress {
            fill: none;
            stroke: var(--cor-primaria);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 283;
            stroke-dashoffset: 283;
            transition: stroke-dashoffset 0.5s ease;
        }
        
        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5em;
            font-weight: bold;
            color: #2c3e50;
        }
        
        /* ========== M√ìDULOS ========== */
        .modules-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
        }
        
        .module-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
        }
        
        .module-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }
        
        .module-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .module-icon {
            font-size: 2em;
            margin-right: 15px;
        }
        
        .module-info h3 {
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .module-difficulty {
            font-size: 0.9em;
            color: #666;
        }
        
        .module-progress {
            background: #f8f9fa;
            height: 8px;
            border-radius: 4px;
            margin: 15px 0;
            overflow: hidden;
        }
        
        .module-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--cor-primaria), var(--cor-secundaria));
            border-radius: 4px;
            transition: width 0.3s ease;
        }
        
        .module-stats {
            display: flex;
            justify-content: space-between;
            margin: 15px 0;
            font-size: 0.9em;
            color: #666;
        }
        
        /* ========== BOT√ïES ========== */
        .btn {
            background: linear-gradient(135deg, var(--cor-primaria), var(--cor-secundaria));
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
        }
        
        .btn-success {
            background: linear-gradient(135deg, var(--cor-sucesso), #229954);
        }
        
        /* ========== ALERTAS ========== */
        .alert {
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }
        
        .alert-info {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            color: #0c5460;
        }
        
        .alert-warning {
            background: #fff3cd;
            border-left: 4px solid var(--cor-alerta);
            color: #856404;
        }
        
        .alert-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }
        
        /* ========== RESPONSIVO ========== */
        @media (max-width: 768px) {
            .header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }
        
        /* ========== UTILIT√ÅRIOS ========== */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .mb-20 {
            margin-bottom: 20px;
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-container">
        <div class="login-card fade-in">
            <div class="logo-container">
                <!-- SUBSTITUA ESTA LINHA PELA LOGO DA SUA PREFEITURA -->
                <div class="login-logo">üèõÔ∏è</div>
                <!-- Exemplo: <img src="logo-prefeitura.png" alt="Prefeitura" class="logo-municipio"> -->
            </div>
            
            <h1 class="login-title">Sistema DCL</h1>
            <p class="login-subtitle">Capacita√ß√£o Continuada</p>
            <div class="municipio-info">
                <!-- PERSONALIZE AQUI COM DADOS DO SEU MUNIC√çPIO -->
                <strong>Prefeitura Municipal de [SEU MUNIC√çPIO]</strong><br>
                Departamento de Compras e Licita√ß√µes
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="username">Usu√°rio</label>
                    <input type="text" id="username" class="form-control" placeholder="Digite seu usu√°rio" required>
                </div>
                
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" class="form-control" placeholder="Digite sua senha" required>
                </div>
                
                <button type="submit" class="btn-login">Entrar no Sistema</button>
            </form>
            
            <!-- √ÅREA DE DEMONSTRA√á√ÉO - REMOVA EM PRODU√á√ÉO -->
            <div class="demo-users">
                <h4>üß™ Usu√°rios de Demonstra√ß√£o</h4>
                <div class="demo-user">
                    <div class="demo-user-info">
                        <div class="demo-user-name">Diretor(a) DCL</div>
                        <div class="demo-user-role">Acesso Administrativo</div>
                    </div>
                    <div class="demo-user-login" onclick="autoLogin('diretor', '123456')">diretor / 123456</div>
                </div>
                <div class="demo-user">
                    <div class="demo-user-info">
                        <div class="demo-user-name">Analista S√™nior</div>
                        <div class="demo-user-role">Usu√°rio Avan√ßado</div>
                    </div>
                    <div class="demo-user-login" onclick="autoLogin('analista.senior', '123456')">analista.senior / 123456</div>
                </div>
                <div class="demo-user">
                    <div class="demo-user-info">
                        <div class="demo-user-name">Analista J√∫nior</div>
                        <div class="demo-user-role">Usu√°rio B√°sico</div>
                    </div>
                    <div class="demo-user-login" onclick="autoLogin('analista.junior', '123456')">analista.junior / 123456</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Sistema Principal -->
    <div id="mainSystem" class="container hidden">
        <!-- Header -->
        <div class="header fade-in">
            <div class="header-left">
                <h1>üèõÔ∏è Sistema DCL</h1>
                <div class="user-info">
                    Bem-vindo(a), <span id="currentUserName"></span> | <span id="currentUserRole"></span>
                </div>
            </div>
            <div class="header-right">
                <div class="user-avatar" id="userAvatar"></div>
                <button class="btn-logout" onclick="logout()">Sair</button>
            </div>
        </div>
        
        <!-- Navigation -->
        <div class="nav-tabs fade-in">
            <div class="nav-tab active" onclick="showTab('dashboard')">üìä Dashboard</div>
            <div class="nav-tab" onclick="showTab('modules')">üìö M√≥dulos</div>
            <div class="nav-tab" onclick="showTab('progress')">üìà Meu Progresso</div>
            <div class="nav-tab" id="adminTab" onclick="showTab('admin')" style="display: none;">üë• Gerencial</div>
        </div>
        
        <!-- Dashboard Tab -->
        <div id="dashboardTab" class="tab-content fade-in">
            <div id="userAlerts"></div>
            
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">üéØ</div>
                        <div class="card-title">Progresso Geral</div>
                    </div>
                    <div class="progress-ring">
                        <svg width="120" height="120">
                            <circle class="progress-ring-circle" cx="60" cy="60" r="45"></circle>
                            <circle class="progress-ring-progress" id="overallProgress" cx="60" cy="60" r="45"></circle>
                        </svg>
                        <div class="progress-text" id="overallProgressText">0%</div>
                    </div>
                    <p class="text-center mb-20" style="color: #666;">Capacita√ß√£o Completa</p>
                    <div class="text-center">
                        <button class="btn" onclick="showTab('modules')">Continuar Estudos</button>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">üìã</div>
                        <div class="card-title">Atividade Recente</div>
                    </div>
                    <div id="recentActivity">
                        <!-- Conte√∫do ser√° populado via JavaScript -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">üèÜ</div>
                        <div class="card-title">Certifica√ß√µes</div>
                    </div>
                    <div id="achievements">
                        <!-- Conte√∫do ser√° populado via JavaScript -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">‚ö°</div>
                        <div class="card-title">Pr√≥ximas Atividades</div>
                    </div>
                    <div id="nextActivities">
                        <!-- Conte√∫do ser√° populado via JavaScript -->
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modules Tab -->
        <div id="modulesTab" class="tab-content hidden">
            <div class="modules-grid" id="modulesContainer">
                <!-- M√≥dulos ser√£o populados via JavaScript -->
            </div>
        </div>
        
        <!-- Progress Tab -->
        <div id="progressTab" class="tab-content hidden">
            <div class="dashboard-grid" id="progressContainer">
                <!-- Conte√∫do ser√° populado via JavaScript -->
            </div>
        </div>
        
        <!-- Admin Tab -->
        <div id="adminTab" class="tab-content hidden">
            <div id="adminContainer">
                <!-- Conte√∫do administrativo ser√° populado via JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // ========== CONFIGURA√á√ÉO DOS USU√ÅRIOS ========== 
        // PERSONALIZE AQUI OS USU√ÅRIOS DA SUA EQUIPE
        const USUARIOS_SISTEMA = {
            // EXEMPLO DE DIRETOR/COORDENADOR
            'diretor': {
                password: '123456', // ALTERE A SENHA EM PRODU√á√ÉO!
                name: 'Jo√£o Silva', // SUBSTITUA PELO NOME REAL
                role: 'Diretor(a) DCL',
                isAdmin: true,
                progress: {
                    'principios': 100,
                    'termo-referencia': 90,
                    'editais': 45,
                    'etp': 25,
                    'dispensa': 0,
                    'contratos': 10
                },
                lastActivity: new Date().toISOString()
            },
            
            // EXEMPLO DE ANALISTA S√äNIOR
            'analista.senior': {
                password: '123456', // ALTERE A SENHA EM PRODU√á√ÉO!
                name: 'Maria Santos', // SUBSTITUA PELO NOME REAL
                role: 'Analista S√™nior',
                isAdmin: false,
                progress: {
                    'principios': 100,
                    'termo-referencia': 100,
                    'editais': 75,
                    'etp': 60,
                    'dispensa': 30,
                    'contratos': 20
                },
                lastActivity: new Date().toISOString()
            },
            
            // EXEMPLO DE ANALISTA J√öNIOR
            'analista.junior': {
                password: '123456', // ALTERE A SENHA EM PRODU√á√ÉO!
                name: 'Pedro Costa', // SUBSTITUA PELO NOME REAL
                role: 'Analista J√∫nior',
                isAdmin: false,
                progress: {
                    'principios': 100,
                    'termo-referencia': 45,
                    'editais': 15,
                    'etp': 0,
                    'dispensa': 0,
                    'contratos': 0
                },
                lastActivity: new Date(Date.now() - 24*60*60*1000).toISOString() // 1 dia atr√°s
            }
            
            // ADICIONE MAIS USU√ÅRIOS CONFORME NECESS√ÅRIO:
            // 'usuario.exemplo': {
            //     password: 'senha_segura',
            //     name: 'Nome Completo',
            //     role: 'Cargo/Fun√ß√£o',
            //     isAdmin: false,
            //     progress: { ... },
            //     lastActivity: new Date().toISOString()
            // }
        };
        
        // ========== CONFIGURA√á√ÉO DOS M√ìDULOS ==========
        const MODULOS_CAPACITACAO = {
            'principios': {
                title: 'Princ√≠pios da Administra√ß√£o P√∫blica',
                icon: '‚öñÔ∏è',
                difficulty: '‚≠ê Fundamental',
                lessons: 4,
                duration: '1h 30min',
                description: 'Base conceitual: legalidade, moralidade, impessoalidade, publicidade, efici√™ncia e outros princ√≠pios fundamentais.',
                prerequisites: []
            },
            'termo-referencia': {
                title: 'Elabora√ß√£o de Termo de Refer√™ncia',
                icon: 'üìã',
                difficulty: '‚≠ê‚≠ê‚≠ê Intermedi√°rio',
                lessons: 6,
                duration: '2h 30min',
                description: 'Aprenda a elaborar Termos de Refer√™ncia completos e em conformidade com a Lei 14.133/2021.',
                prerequisites: ['principios']
            },
            'etp': {
                title: 'Estudo T√©cnico Preliminar',
                icon: 'üîç',
                difficulty: '‚≠ê‚≠ê B√°sico',
                lessons: 5,
                duration: '2h',
                description: 'Fundamentos para elabora√ß√£o de ETPs consistentes e fundamentados, base de toda contrata√ß√£o p√∫blica.',
                prerequisites: ['principios']
            },
            'editais': {
                title: 'Elabora√ß√£o de Editais',
                icon: 'üìÑ',
                difficulty: '‚≠ê‚≠ê‚≠ê‚≠ê Avan√ßado',
                lessons: 8,
                duration: '4h 15min',
                description: 'Domine a arte de elaborar editais claros, completos e juridicamente seguros para todos os tipos de licita√ß√£o.',
                prerequisites: ['termo-referencia', 'etp']
            },
            'dispensa': {
                title: 'Dispensa e Inexigibilidade',
                icon: '‚ö°',
                difficulty: '‚≠ê‚≠ê‚≠ê‚≠ê Avan√ßado',
                lessons: 7,
                duration: '3h 45min',
                description: 'Quando e como aplicar corretamente as hip√≥teses de dispensa e inexigibilidade de licita√ß√£o.',
                prerequisites: ['principios', 'termo-referencia']
            },
            'contratos': {
                title: 'Minutas de Contrato',
                icon: 'üìù',
                difficulty: '‚≠ê‚≠ê‚≠ê Intermedi√°rio',
                lessons: 6,
                duration: '3h',
                description: 'Elabora√ß√£o de minutas contratuais completas e adequadas a cada tipo de contrata√ß√£o p√∫blica.',
                prerequisites: ['termo-referencia']
            }
        };
        
        // ========== VARI√ÅVEIS GLOBAIS ==========
        let usuarioAtual = null;
        let tabAtiva = 'dashboard';
        
        // ========== SISTEMA DE LOGIN ==========
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value.trim();
            
            if (USUARIOS_SISTEMA[username] && USUARIOS_SISTEMA[username].password === password) {
                usuarioAtual = USUARIOS_SISTEMA[username];
                usuarioAtual.username = username;
                
                // Atualizar √∫ltima atividade
                usuarioAtual.lastActivity = new Date().toISOString();
                
                // Esconder tela de login e mostrar sistema
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainSystem').classList.remove('hidden');
                
                // Configurar interface do usu√°rio
                configurarInterfaceUsuario();
                
                // Mostrar dashboard
                mostrarAba('dashboard');
                
                console.log(`‚úÖ Login realizado: ${usuarioAtual.name}`);
            } else {
                alert('‚ùå Usu√°rio ou senha incorretos!\n\nVerifique suas credenciais e tente novamente.');
                document.getElementById('password').value = '';
            }
        });
        
        // ========== FUN√á√ÉO DE AUTO-LOGIN (APENAS DEMONSTRA√á√ÉO) ==========
        function autoLogin(username, password) {
            document.getElementById('username').value = username;
            document.getElementById('password').value = password;
            document.getElementById('loginForm').dispatchEvent(new Event('submit'));
        }
        
        // ========== CONFIGURA√á√ÉO DA INTERFACE ==========
        function configurarInterfaceUsuario() {
            // Atualizar informa√ß√µes do usu√°rio no header
            document.getElementById('currentUserName').textContent = usuarioAtual.name;
            document.getElementById('currentUserRole').textContent = usuarioAtual.role;
            document.getElementById('userAvatar').textContent = obterIniciais(usuarioAtual.name);
            
            // Mostrar/esconder tab administrativa
            const adminTab = document.querySelector('[onclick="showTab(\'admin\')"]');
            if (usuarioAtual.isAdmin) {
                adminTab.style.display = 'block';
            } else {
                adminTab.style.display = 'none';
            }
            
            // Atualizar progresso geral
            atualizarProgressoGeral();
            
            // Configurar conte√∫do das abas
            popularDashboard();
            popularModulos();
            popularProgresso();
            
            if (usuarioAtual.isAdmin) {
                popularAreaAdministrativa();
            }
            
            console.log('üéõÔ∏è Interface configurada para:', usuarioAtual.name);
        }
        
        // ========== UTILIT√ÅRIOS ==========
        function obterIniciais(nomeCompleto) {
            return nomeCompleto.split(' ')
                .filter(parte => parte.length > 0)
                .map(parte => parte[0].toUpperCase())
                .slice(0, 2)
                .join('');
        }
        
        function calcularProgressoGeral() {
            const progressos = Object.values(usuarioAtual.progress);
            return Math.round(progressos.reduce((sum, val) => sum + val, 0) / progressos.length);
        }
        
        function obterStatusModulo(moduleId) {
            const progress = usuarioAtual.progress[moduleId] || 0;
            if (progress === 100) return { status: 'concluido', texto: '‚úì Conclu√≠do', classe: 'btn-success' };
            if (progress > 0) return { status: 'andamento', texto: 'Continuar', classe: 'btn' };
            return { status: 'nao_iniciado', texto: 'Iniciar', classe: 'btn-secondary' };
        }
        
        function verificarPreRequisitos(moduleId) {
            const modulo = MODULOS_CAPACITACAO[moduleId];
            if (!modulo.prerequisites || modulo.prerequisites.length === 0) return true;
            
            return modulo.prerequisites.every(prereq => 
                usuarioAtual.progress[prereq] && usuarioAtual.progress[prereq] >= 80
            );
        }
        
        // ========== ATUALIZA√á√ÉO DO PROGRESSO GERAL ==========
        function atualizarProgressoGeral() {
            const progressoGeral = calcularProgressoGeral();
            const progressElement = document.getElementById('overallProgress');
            const textElement = document.getElementById('overallProgressText');
            
            if (progressElement && textElement) {
                const circumference = 2 * Math.PI * 45; // raio = 45
                const offset = circumference - (progressoGeral / 100) * circumference;
                
                progressElement.style.strokeDashoffset = offset;
                textElement.textContent = progressoGeral + '%';
            }
        }
        
        // ========== POPULAR DASHBOARD ==========
        function popularDashboard() {
            // Alertas personalizados
            const alertsContainer = document.getElementById('userAlerts');
            const alertas = gerarAlertas();
            
            alertsContainer.innerHTML = alertas.map(alerta => `
                <div class="alert alert-${alerta.tipo}">
                    <div class="alert-icon">${alerta.icone}</div>
                    <div>${alerta.mensagem}</div>
                </div>
            `).join('');
            
            // Atividade recente
            document.getElementById('recentActivity').innerHTML = gerarAtividadeRecente();
            
            // Certifica√ß√µes
            document.getElementById('achievements').innerHTML = gerarCertificacoes();
            
            // Pr√≥ximas atividades
            document.getElementById('nextActivities').innerHTML = gerarProximasAtividades();
        }
        
        function gerarAlertas() {
            const alertas = [];
            const progresso = usuarioAtual.progress;
            
            // Verificar m√≥dulos quase conclu√≠dos
            Object.entries(progresso).forEach(([moduleId, percent]) => {
                if (percent > 80 && percent < 100) {
                    const modulo = MODULOS_CAPACITACAO[moduleId];
                    alertas.push({
                        tipo: 'warning',
                        icone: '‚è∞',
                        mensagem: `Voc√™ est√° quase concluindo o m√≥dulo <strong>${modulo.title}</strong>. Que tal finalizar hoje?`
                    });
                }
            });
            
            // Verificar novos m√≥dulos dispon√≠veis
            Object.keys(MODULOS_CAPACITACAO).forEach(moduleId => {
                if (progresso[moduleId] === 0 && verificarPreRequisitos(moduleId)) {
                    const modulo = MODULOS_CAPACITACAO[moduleId];
                    alertas.push({
                        tipo: 'info',
                        icone: 'üìö',
                        mensagem: `Novo m√≥dulo dispon√≠vel: <strong>${modulo.title}</strong>. Recomendado como pr√≥ximo passo!`
                    });
                }
            });
            
            // Limite de alertas
            return alertas.slice(0, 2);
        }
        
        function gerarAtividadeRecente() {
            // Simular atividades baseadas no progresso atual
            const atividades = [];
            
            Object.entries(usuarioAtual.progress).forEach(([moduleId, progress]) => {
                if (progress > 0) {
                    const modulo = MODULOS_CAPACITACAO[moduleId];
                    const horasAtras = Math.floor(Math.random() * 48) + 1;
                    
                    if (progress === 100) {
                        atividades.push({
                            titulo: `${modulo.title}`,
                            subtitulo: 'M√≥dulo conclu√≠do',
                            tempo: `${horasAtras}h atr√°s`
                        });
                    } else {
                        atividades.push({
                            titulo: `${modulo.title}`,
                            subtitulo: `Progresso: ${progress}%`,
                            tempo: `${horasAtras}h atr√°s`
                        });
                    }
                }
            });
            
            return atividades.slice(0, 3).map(ativ => `
                <div style="padding: 10px 0; border-bottom: 1px solid #eee;">
                    <strong>${ativ.titulo}</strong><br>
                    <small style="color: #666;">${ativ.subtitulo} ‚Ä¢ ${ativ.tempo}</small>
                </div>
            `).join('');
        }
        
        function gerarCertificacoes() {
            const certificacoes = [];
            
            Object.entries(usuarioAtual.progress).forEach(([moduleId, progress]) => {
                const modulo = MODULOS_CAPACITACAO[moduleId];
                
                if (progress === 100) {
                    certificacoes.push({
                        titulo: modulo.title,
                        icone: 'ü•á',
                        status: 'Especialista',
                        classe: 'success',
                        data: 'Conclu√≠do'
                    });
                } else if (progress > 70) {
                    certificacoes.push({
                        titulo: modulo.title,
                        icone: 'ü•à',
                        status: `Em progresso (${progress}%)`,
                        classe: 'warning',
                        data: 'Quase l√°!'
                    });
                }
            });
            
            // Adicionar certifica√ß√µes bloqueadas
            Object.entries(MODULOS_CAPACITACAO).forEach(([moduleId, modulo]) => {
                if ((usuarioAtual.progress[moduleId] || 0) < 70 && !verificarPreRequisitos(moduleId)) {
                    certificacoes.push({
                        titulo: modulo.title,
                        icone: 'üîí',
                        status: 'Bloqueado',
                        classe: 'blocked',
                        data: 'Complete pr√©-requisitos'
                    });
                }
            });
            
            return certificacoes.slice(0, 3).map(cert => {
                const bgClass = cert.classe === 'success' ? '#d4edda' : 
                               cert.classe === 'warning' ? '#fff3cd' : '#f8f9fa';
                const opacity = cert.classe === 'blocked' ? 0.6 : 1;
                
                return `
                    <div style="padding: 15px; background: ${bgClass}; border-radius: 8px; margin-bottom: 10px; opacity: ${opacity};">
                        <div style="display: flex; align-items: center;">
                            <span style="font-size: 2em; margin-right: 15px;">${cert.icone}</span>
                            <div>
                                <strong>${cert.titulo}</strong><br>
                                <small>${cert.status} ‚Ä¢ ${cert.data}</small>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function gerarProximasAtividades() {
            const atividades = [];
            
            // M√≥dulos recomendados
            Object.keys(MODULOS_CAPACITACAO).forEach(moduleId => {
                const progress = usuarioAtual.progress[moduleId] || 0;
                const modulo = MODULOS_CAPACITACAO[moduleId];
                
                if (progress === 0 && verificarPreRequisitos(moduleId)) {
                    atividades.push({
                        titulo: modulo.title,
                        subtitulo: 'M√≥dulo recomendado',
                        icone: 'üìù'
                    });
                } else if (progress > 0 && progress < 100) {
                    atividades.push({
                        titulo: modulo.title,
                        subtitulo: `Continuar de ${progress}%`,
                        icone: '‚ñ∂Ô∏è'
                    });
                }
            });
            
            // Atividades padr√£o
            atividades.push(
                { titulo: 'Avalia√ß√£o Mensal', subtitulo: 'Dispon√≠vel em 3 dias', icone: 'üéØ' },
                { titulo: 'Relat√≥rio de Progresso', subtitulo: 'Gerar relat√≥rio pessoal', icone: 'üìä' }
            );
            
            return atividades.slice(0, 4).map(ativ => `
                <div style="padding: 10px 0; border-bottom: 1px solid #eee;">
                    <strong>${ativ.icone} ${ativ.titulo}</strong><br>
                    <small style="color: #666;">${ativ.subtitulo}</small>
                </div>
            `).join('');
        }
        
        // ========== POPULAR M√ìDULOS ==========
        function popularModulos() {
            const container = document.getElementById('modulesContainer');
            
            const modulosHtml = Object.entries(MODULOS_CAPACITACAO).map(([moduleId, modulo]) => {
                const progress = usuarioAtual.progress[moduleId] || 0;
                const status = obterStatusModulo(moduleId);
                const bloqueado = !verificarPreRequisitos(moduleId);
                
                return `
                    <div class="module-card ${bloqueado ? 'opacity-60' : ''}" onclick="abrirModulo('${moduleId}')">
                        <div class="module-header">
                            <div class="module-icon">${modulo.icon}</div>
                            <div class="module-info">
                                <h3>${modulo.title}</h3>
                                <div class="module-difficulty">${modulo.difficulty}</div>
                            </div>
                        </div>
                        <p>${modulo.description}</p>
                        <div class="module-progress">
                            <div class="module-progress-fill" style="width: ${progress}%;"></div>
                        </div>
                        <div class="module-stats">
                            <span>üìö ${modulo.lessons} li√ß√µes</span>
                            <span>‚è±Ô∏è ${modulo.duration}</span>
                            <span>üéØ ${progress}% conclu√≠do</span>
                        </div>
                        <button class="btn ${status.classe}" ${bloqueado ? 'disabled' : ''}>
                            ${bloqueado ? 'üîí Bloqueado' : status.texto}
                        </button>
                        ${bloqueado && modulo.prerequisites.length > 0 ? 
                            `<div style="margin-top: 10px; font-size: 0.8em; color: #666;">
                                Pr√©-requisitos: ${modulo.prerequisites.map(p => MODULOS_CAPACITACAO[p].title).join(', ')}
                            </div>` : ''
                        }
                    </div>
                `;
            }).join('');
            
            container.innerHTML = modulosHtml;
        }
        
        // ========== POPULAR PROGRESSO ==========
        function popularProgresso() {
            const container = document.getElementById('progressContainer');
            
            // Estat√≠sticas detalhadas
            const modulosConcluidos = Object.values(usuarioAtual.progress).filter(p => p === 100).length;
            const totalModulos = Object.keys(MODULOS_CAPACITACAO).length;
            const tempoEstudo = calcularTempoEstudo();
            const mediaAcertos = 85 + Math.floor(Math.random() * 10); // Simulated
            const diasConsecutivos = Math.floor(Math.random() * 15) + 1;
            
            container.innerHTML = `
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">üìä</div>
                        <div class="card-title">Estat√≠sticas Detalhadas</div>
                    </div>
                    <div style="margin-bottom: 20px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>M√≥dulos Conclu√≠dos:</span>
                            <strong>${modulosConcluidos} / ${totalModulos}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Tempo Total de Estudo:</span>
                            <strong>${tempoEstudo}</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>M√©dia de Acertos em Quiz:</span>
                            <strong>${mediaAcertos}%</strong>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
                            <span>Sequ√™ncia de Dias Consecutivos:</span>
                            <strong>${diasConsecutivos} dias</strong>
                        </div>
                    </div>
                    <button class="btn" onclick="gerarRelatorioDetalhado()">Gerar Relat√≥rio Completo</button>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">üìà</div>
                        <div class="card-title">Progresso por M√≥dulo</div>
                    </div>
                    <div>
                        ${Object.entries(MODULOS_CAPACITACAO).map(([moduleId, modulo]) => {
                            const progress = usuarioAtual.progress[moduleId] || 0;
                            const cor = progress === 100 ? '#28a745' : 
                                       progress > 50 ? '#007bff' : 
                                       progress > 0 ? '#ffc107' : '#6c757d';
                            
                            return `
                                <div style="margin-bottom: 15px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>${modulo.title}</span>
                                        <strong>${progress}%</strong>
                                    </div>
                                    <div style="background: #e9ecef; height: 8px; border-radius: 4px;">
                                        <div style="background: ${cor}; height: 100%; width: ${progress}%; border-radius: 4px; transition: width 0.3s ease;"></div>
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <div class="card-icon">üìÖ</div>
                        <div class="card-title">Hist√≥rico de Atividades</div>
                    </div>
                    <div style="max-height: 300px; overflow-y: auto;">
                        ${gerarHistoricoAtividades()}
                    </div>
                </div>
            `;
        }
        
        function calcularTempoEstudo() {
            let tempoTotal = 0;
            
            Object.entries(usuarioAtual.progress).forEach(([moduleId, progress]) => {
                const modulo = MODULOS_CAPACITACAO[moduleId];
                const duracaoMinutos = parseInt(modulo.duration.match(/(\d+)h/)?.[1] || 0) * 60 + 
                                      parseInt(modulo.duration.match(/(\d+)min/)?.[1] || 0);
                tempoTotal += (duracaoMinutos * progress / 100);
            });
            
            const horas = Math.floor(tempoTotal / 60);
            const minutos = Math.floor(tempoTotal % 60);
            
            return `${horas}h ${minutos}min`;
        }
        
        function gerarHistoricoAtividades() {
            const atividades = [];
            const agora = new Date();
            
            Object.entries(usuarioAtual.progress).forEach(([moduleId, progress]) => {
                if (progress > 0) {
                    const modulo = MODULOS_CAPACITACAO[moduleId];
                    const horasAtras = Math.floor(Math.random() * 72) + 1;
                    const dataAtividade = new Date(agora.getTime() - horasAtras * 60 * 60 * 1000);
                    
                    atividades.push({
                        titulo: progress === 100 ? 'M√≥dulo Conclu√≠do' : 'Progresso Atualizado',
                        modulo: modulo.title,
                        nota: progress === 100 ? `Nota: ${(8.5 + Math.random() * 1.5).toFixed(1)}/10` : `${progress}% conclu√≠do`,
                        data: dataAtividade
                    });
                }
            });
            
            return atividades
                .sort((a, b) => b.data - a.data)
                .slice(0, 10)
                .map(ativ => `
                    <div style="padding: 10px 0; border-bottom: 1px solid #eee; display: flex; justify-content: space-between;">
                        <div>
                            <strong>${ativ.titulo} - ${ativ.modulo}</strong><br>
                            <small style="color: #666;">${ativ.nota}</small>
                        </div>
                        <small style="color: #666;">${formatarDataHora(ativ.data)}</small>
                    </div>
                `).join('');
        }
        
        function formatarDataHora(data) {
            const agora = new Date();
            const diffHoras = Math.floor((agora - data) / (1000 * 60 * 60));
            
            if (diffHoras < 1) return 'Agora';
            if (diffHoras < 24) return `${diffHoras}h atr√°s`;
            
            const diffDias = Math.floor(diffHoras / 24);
            if (diffDias === 1) return 'Ontem';
            if (diffDias < 7) return `${diffDias} dias atr√°s`;
            
            return data.toLocaleDateString('pt-BR');
        }
        
        // ========== POPULAR √ÅREA ADMINISTRATIVA ==========
        function popularAreaAdministrativa() {
            if (!usuarioAtual.isAdmin) return;
            
            const container = document.getElementById('adminContainer');
            const todosUsuarios = Object.entries(USUARIOS_SISTEMA);
            
            container.innerHTML = `
                <div class="dashboard-grid" style="grid-template-columns: 1fr 1fr;">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">üë•</div>
                            <div class="card-title">Desempenho da Equipe</div>
                        </div>
                        ${todosUsuarios.map(([username, user]) => {
                            const progressoGeral = Math.round(
                                Object.values(user.progress).reduce((sum, val) => sum + val, 0) / 
                                Object.keys(user.progress).length
                            );
                            const modulosConcluidos = Object.values(user.progress).filter(p => p === 100).length;
                            const ultimaAtividade = calcularUltimaAtividade(user.lastActivity);
                            
                            return `
                                <div class="team-member">
                                    <div class="team-avatar">${obterIniciais(user.name)}</div>
                                    <div class="team-info">
                                        <div class="team-name">${user.name}</div>
                                        <div class="team-progress">${modulosConcluidos}/6 m√≥dulos ‚Ä¢ ${ultimaAtividade}</div>
                                    </div>
                                    <div class="team-score">${progressoGeral}%</div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <div class="card-icon">üìä</div>
                            <div class="card-title">Estat√≠sticas Gerais</div>
                        </div>
                        ${gerarEstatisticasGerais()}
                        <button class="btn" onclick="gerarRelatorioEquipe()">Relat√≥rio Completo da Equipe</button>
                    </div>
                </div>
                
                <div class="dashboard-card" style="margin-top: 20px;">
                    <div class="card-header">
                        <div class="card-icon">‚ö†Ô∏è</div>
                        <div class="card-title">Alertas e A√ß√µes Necess√°rias</div>
                    </div>
                    ${gerarAlertasAdministrativos()}
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" onclick="enviarLembretes()">Enviar Lembretes</button>
                        <button class="btn btn-secondary" onclick="agendarTreinamento()">Agendar Treinamento</button>
                    </div>
                </div>
            `;
        }
        
        function calcularUltimaAtividade(lastActivity) {
            const agora = new Date();
            const ultimaAtividade = new Date(lastActivity);
            const diffHoras = Math.floor((agora - ultimaAtividade) / (1000 * 60 * 60));
            
            if (diffHoras < 1) return 'Ativo agora';
            if (diffHoras < 24) return 'Hoje';
            
            const diffDias = Math.floor(diffHoras / 24);
            if (diffDias === 1) return 'Ontem';
            if (diffDias < 7) return `${diffDias} dias atr√°s`;
            
            return 'Mais de 1 semana';
        }
        
        function gerarEstatisticasGerais() {
            const todosUsuarios = Object.values(USUARIOS_SISTEMA);
            const mediaGeral = Math.round(
                todosUsuarios.reduce((sum, user) => 
                    sum + (Object.values(user.progress).reduce((s, v) => s + v, 0) / Object.keys(user.progress).length)
                , 0) / todosUsuarios.length
            );
            
            const modulosPorPessoa = Math.round(
                todosUsuarios.reduce((sum, user) => 
                    sum + Object.values(user.progress).filter(p => p > 0).length
                , 0) / todosUsuarios.length * 10
            ) / 10;
            
            const taxaConclusao = Math.round(
                todosUsuarios.reduce((sum, user) => 
                    sum + (Object.values(user.progress).filter(p => p === 100).length / Object.keys(user.progress).length * 100)
                , 0) / todosUsuarios.length
            );
            
            return `
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 2em; font-weight: bold; color: var(--cor-primaria);">${mediaGeral}%</div>
                        <div style="font-size: 0.9em; color: #666;">M√©dia da Equipe</div>
                    </div>
                    
                    <div style="text-align: center; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                        <div style="font-size: 2em; font-weight: bold; color: var(--cor-erro);">${modulosPorPessoa}</div>
                        <div style="font-size: 0.9em; color: #666;">M√≥dulos/Pessoa</div>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                        <span>Taxa de Conclus√£o Geral</span>
                        <strong>${taxaConclusao}%</strong>
                    </div>
                    <div style="background: #e9ecef; height: 8px; border-radius: 4px;">
                        <div style="background: var(--cor-sucesso); height: 100%; width: ${taxaConclusao}%; border-radius: 4px;"></div>
                    </div>
                </div>
            `;
        }
        
        function gerarAlertasAdministrativos() {
            const alertas = [];
            
            // Verificar usu√°rios inativos
            Object.entries(USUARIOS_SISTEMA).forEach(([username, user]) => {
                const ultimaAtividade = new Date(user.lastActivity);
                const agora = new Date();
                const diffDias = Math.floor((agora - ultimaAtividade) / (1000 * 60 * 60 * 24));
                
                if (diffDias >= 5) {
                    alertas.push({
                        tipo: 'warning',
                        icone: '‚è∞',
                        mensagem: `<strong>${user.name}</strong> n√£o acessa o sistema h√° ${diffDias} dias. Recomenda-se contato direto.`
                    });
                }
            });
            
            // Verificar pr√©-requisitos para avalia√ß√µes
            const semPreRequisitos = Object.values(USUARIOS_SISTEMA)
                .filter(user => Object.values(user.progress).filter(p => p >= 80).length < 2).length;
            
            if (semPreRequisitos > 0) {
                alertas.push({
                    tipo: 'info',
                    icone: 'üìÖ',
                    mensagem: `<strong>Avalia√ß√£o Mensal</strong> ser√° liberada em 2 dias. ${semPreRequisitos} membros ainda n√£o completaram os pr√©-requisitos.`
                });
            }
            
            return alertas.map(alerta => `
                <div class="alert alert-${alerta.tipo}">
                    <div class="alert-icon">${alerta.icone}</div>
                    <div>${alerta.mensagem}</div>
                </div>
            `).join('');
        }
        
        // ========== NAVEGA√á√ÉO ENTRE ABAS ==========
        function mostrarAba(nomeAba) {
            // Esconder todas as abas
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // Remover classe active de todas as nav-tabs
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar aba selecionada
            const abaTarget = document.getElementById(nomeAba + 'Tab');
            if (abaTarget) {
                abaTarget.classList.remove('hidden');
                abaTarget.classList.add('fade-in');
            }
            
            // Adicionar classe active na nav-tab correspondente
            const navTarget = document.querySelector(`[onclick="showTab('${nomeAba}')"]`);
            if (navTarget) {
                navTarget.classList.add('active');
            }
            
            tabAtiva = nomeAba;
        }
        
        // Compatibilidade com o HTML (showTab vs mostrarAba)
        function showTab(nomeAba) {
            mostrarAba(nomeAba);
        }
        
        // ========== A√á√ïES DOS M√ìDULOS ==========
        function abrirModulo(moduleId) {
            const modulo = MODULOS_CAPACITACAO[moduleId];
            const progress = usuarioAtual.progress[moduleId] || 0;
            const bloqueado = !verificarPreRequisitos(moduleId);
            
            if (bloqueado) {
                const prerequisitos = modulo.prerequisites.map(p => MODULOS_CAPACITACAO[p].title).join(', ');
                alert(`üîí M√≥dulo Bloqueado\n\nPara acessar "${modulo.title}", voc√™ precisa primeiro completar:\n\n${prerequisitos}\n\nComplete os pr√©-requisitos e tente novamente.`);
                return;
            }
            
            if (progress === 0) {
                const confirmStart = confirm(`üöÄ Iniciar Novo M√≥dulo\n\nüìö ${modulo.title}\nüéØ ${modulo.difficulty}\n‚è±Ô∏è Dura√ß√£o estimada: ${modulo.duration}\nüìñ ${modulo.lessons} li√ß√µes\n\n${modulo.description}\n\nDeseja come√ßar agora?`);
                
                if (confirmStart) {
                    // Simular in√≠cio do m√≥dulo
                    usuarioAtual.progress[moduleId] = 15;
                    salvarProgresso();
                    atualizarInterfaceCompleta();
                    
                    alert(`‚úÖ M√≥dulo Iniciado!\n\nüéì "${modulo.title}"\nüìà Progresso inicial: 15%\n\n‚ñ∂Ô∏è Em um sistema real, voc√™ seria direcionado para a primeira li√ß√£o.\n\nüí° Dica: Este √© um sistema de demonstra√ß√£o. Em produ√ß√£o, aqui carregaria o conte√∫do real das li√ß√µes.`);
                }
            } else if (progress === 100) {
                alert(`üèÜ M√≥dulo Conclu√≠do!\n\n‚úÖ "${modulo.title}"\nüéØ Progresso: ${progress}%\nüèÖ Status: Certificado obtido\n\nüìã Op√ß√µes dispon√≠veis:\n‚Ä¢ Revisar conte√∫do\n‚Ä¢ Refazer avalia√ß√µes\n‚Ä¢ Acessar materiais extras\n\nüí° Em um sistema real, voc√™ teria acesso completo ao conte√∫do para revis√£o.`);
            } else {
                const confirmContinue = confirm(`üìñ Continuar M√≥dulo\n\nüìö ${modulo.title}\nüìà Progresso atual: ${progress}%\n‚è±Ô∏è Tempo restante estimado: ${calcularTempoRestante(modulo.duration, progress)}\n\nDeseja continuar de onde parou?`);
                
                if (confirmContinue) {
                    // Simular progresso adicional
                    const novoProgresso = Math.min(100, progress + Math.floor(Math.random() * 20) + 10);
                    usuarioAtual.progress[moduleId] = novoProgresso;
                    salvarProgresso();
                    atualizarInterfaceCompleta();
                    
                    if (novoProgresso === 100) {
                        setTimeout(() => {
                            alert(`üéâ PARAB√âNS!\n\nüèÜ Voc√™ concluiu o m√≥dulo "${modulo.title}"!\nüìú Certificado desbloqueado\n‚≠ê Novos m√≥dulos podem estar dispon√≠veis\n\nüöÄ Continue sua jornada de capacita√ß√£o!`);
                        }, 1000);
                    } else {
                        alert(`üìà Progresso Atualizado!\n\nüìö ${modulo.title}\nüéØ Novo progresso: ${novoProgresso}%\n\n‚ñ∂Ô∏è Continue estudando para desbloquear novos conte√∫dos e certifica√ß√µes!`);
                    }
                }
            }
        }
        
        function calcularTempoRestante(duracaoTotal, progressoAtual) {
            const duracaoMinutos = parseInt(duracaoTotal.match(/(\d+)h/)?.[1] || 0) * 60 + 
                                  parseInt(duracaoTotal.match(/(\d+)min/)?.[1] || 0);
            const minutosRestantes = Math.round(duracaoMinutos * (100 - progressoAtual) / 100);
            
            if (minutosRestantes < 60) return `${minutosRestantes}min`;
            
            const horas = Math.floor(minutosRestantes / 60);
            const mins = minutosRestantes % 60;
            return `${horas}h ${mins}min`;
        }
        
        // ========== RELAT√ìRIOS ==========
        function gerarRelatorioDetalhado() {
            const progress = usuarioAtual.progress;
            const totalModulos = Object.keys(MODULOS_CAPACITACAO).length;
            const modulosConcluidos = Object.values(progress).filter(p => p === 100).length;
            const progressoMedio = calcularProgressoGeral();
            
            let relatorio = `üìä RELAT√ìRIO DETALHADO DE PROGRESSO\n`;
            relatorio += `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n`;
            relatorio += `üë§ Servidor: ${usuarioAtual.name}\n`;
            relatorio += `üè¢ Cargo: ${usuarioAtual.role}\n`;
            relatorio += `üìÖ Data: ${new Date().toLocaleDateString('pt-BR')}\n`;
            relatorio += `‚è∞ Hora: ${new Date().toLocaleTimeString('pt-BR')}\n\n`;
            
            relatorio += `üìà RESUMO GERAL\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            relatorio += `‚úÖ M√≥dulos Conclu√≠dos: ${modulosConcluidos}/${totalModulos} (${Math.round(modulosConcluidos/totalModulos*100)}%)\n`;
            relatorio += `üìä Progresso M√©dio: ${progressoMedio}%\n`;
            relatorio += `‚è±Ô∏è Tempo de Estudo: ${calcularTempoEstudo()}\n`;
            relatorio += `üéØ √öltima Atividade: ${formatarDataHora(new Date(usuarioAtual.lastActivity))}\n\n`;
            
            relatorio += `üìö DETALHAMENTO POR M√ìDULO\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            Object.entries(MODULOS_CAPACITACAO).forEach(([moduleId, modulo]) => {
                const prog = progress[moduleId] || 0;
                const status = prog === 100 ? '‚úÖ CONCLU√çDO' : prog > 0 ? 'üü° EM PROGRESSO' : '‚ö™ N√ÉO INICIADO';
                relatorio += `${status} ${modulo.title}: ${prog}%\n`;
                
                if (prog > 0 && prog < 100) {
                    relatorio += `   ‚îî‚îÄ Tempo restante estimado: ${calcularTempoRestante(modulo.duration, prog)}\n`;
                } else if (prog === 0 && !verificarPreRequisitos(moduleId)) {
                    relatorio += `   ‚îî‚îÄ ‚ö†Ô∏è Aguardando pr√©-requisitos\n`;
                }
            });
            
            relatorio += `\nüéØ PR√ìXIMAS A√á√ïES RECOMENDADAS\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            
            // Sugest√µes personalizadas
            const sugestoes = [];
            Object.entries(progress).forEach(([moduleId, prog]) => {
                if (prog > 80 && prog < 100) {
                    sugestoes.push(`‚Ä¢ Finalizar "${MODULOS_CAPACITACAO[moduleId].title}" (${prog}%)`);
                }
            });
            
            Object.keys(MODULOS_CAPACITACAO).forEach(moduleId => {
                if ((progress[moduleId] || 0) === 0 && verificarPreRequisitos(moduleId)) {
                    sugestoes.push(`‚Ä¢ Iniciar "${MODULOS_CAPACITACAO[moduleId].title}"`);
                }
            });
            
            if (sugestoes.length === 0) {
                sugestoes.push('‚Ä¢ Manter regularidade nos estudos');
                sugestoes.push('‚Ä¢ Revisar m√≥dulos conclu√≠dos');
            }
            
            relatorio += sugestoes.slice(0, 3).join('\n');
            
            relatorio += `\n\nüìã OBSERVA√á√ïES\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            relatorio += `‚Ä¢ Relat√≥rio gerado automaticamente pelo Sistema DCL\n`;
            relatorio += `‚Ä¢ Dados baseados na atividade registrada at√© ${new Date().toLocaleDateString('pt-BR')}\n`;
            relatorio += `‚Ä¢ Para d√∫vidas, entre em contato com a coordena√ß√£o do DCL\n`;
            
            // Exibir relat√≥rio
            const novaJanela = window.open('', '_blank');
            novaJanela.document.write(`
                <html>
                <head>
                    <title>Relat√≥rio de Progresso - ${usuarioAtual.name}</title>
                    <style>
                        body { font-family: monospace; padding: 20px; background: #f5f5f5; }
                        pre { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                        @media print { body { background: white; } }
                    </style>
                </head>
                <body>
                    <pre>${relatorio}</pre>
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Imprimir</button>
                        <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Fechar</button>
                    </div>
                </body>
                </html>
            `);
        }
        
        function gerarRelatorioEquipe() {
            if (!usuarioAtual.isAdmin) {
                alert('‚ùå Acesso negado. Apenas administradores podem gerar relat√≥rios da equipe.');
                return;
            }
            
            let relatorio = `üë• RELAT√ìRIO GERENCIAL DA EQUIPE DCL\n`;
            relatorio += `‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê\n`;
            relatorio += `üìÖ Data: ${new Date().toLocaleDateString('pt-BR')}\n`;
            relatorio += `‚è∞ Hora: ${new Date().toLocaleTimeString('pt-BR')}\n`;
            relatorio += `üë§ Gerado por: ${usuarioAtual.name} (${usuarioAtual.role})\n\n`;
            
            // Estat√≠sticas gerais
            const todosUsuarios = Object.values(USUARIOS_SISTEMA);
            const mediaGeral = Math.round(
                todosUsuarios.reduce((sum, user) => 
                    sum + (Object.values(user.progress).reduce((s, v) => s + v, 0) / Object.keys(user.progress).length)
                , 0) / todosUsuarios.length
            );
            
            relatorio += `üìä ESTAT√çSTICAS GERAIS\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            relatorio += `üë• Total de Servidores: ${todosUsuarios.length}\n`;
            relatorio += `üìà M√©dia Geral da Equipe: ${mediaGeral}%\n`;
            relatorio += `üìö Total de M√≥dulos Dispon√≠veis: ${Object.keys(MODULOS_CAPACITACAO).length}\n\n`;
            
            relatorio += `üë§ DESEMPENHO INDIVIDUAL\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            
            // Ordenar usu√°rios por desempenho
            const usuariosOrdenados = Object.entries(USUARIOS_SISTEMA)
                .map(([username, user]) => ({
                    ...user,
                    username,
                    progresso: Math.round(Object.values(user.progress).reduce((sum, val) => sum + val, 0) / Object.keys(user.progress).length),
                    modulosConcluidos: Object.values(user.progress).filter(p => p === 100).length
                }))
                .sort((a, b) => b.progresso - a.progresso);
            
            usuariosOrdenados.forEach((user, index) => {
                const posicao = ['ü•á', 'ü•à', 'ü•â', 'üìä', 'üìä'][index] || 'üìä';
                const ultimaAtividade = calcularUltimaAtividade(user.lastActivity);
                
                relatorio += `${posicao} ${user.name}\n`;
                relatorio += `   ‚îú‚îÄ Cargo: ${user.role}\n`;
                relatorio += `   ‚îú‚îÄ Progresso Geral: ${user.progresso}%\n`;
                relatorio += `   ‚îú‚îÄ M√≥dulos Conclu√≠dos: ${user.modulosConcluidos}/${Object.keys(MODULOS_CAPACITACAO).length}\n`;
                relatorio += `   ‚îî‚îÄ √öltima Atividade: ${ultimaAtividade}\n\n`;
            });
            
            relatorio += `üö® ALERTAS E A√á√ïES NECESS√ÅRIAS\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            
            // Identificar usu√°rios com problemas
            const alertas = [];
            usuariosOrdenados.forEach(user => {
                const ultimaAtividade = new Date(user.lastActivity);
                const agora = new Date();
                const diffDias = Math.floor((agora - ultimaAtividade) / (1000 * 60 * 60 * 24));
                
                if (diffDias >= 7) {
                    alertas.push(`‚õî ${user.name}: Inativo h√° ${diffDias} dias - A√á√ÉO URGENTE`);
                } else if (diffDias >= 3) {
                    alertas.push(`‚ö†Ô∏è ${user.name}: Inativo h√° ${diffDias} dias - Acompanhar`);
                }
                
                if (user.progresso < 30) {
                    alertas.push(`üìâ ${user.name}: Progresso baixo (${user.progresso}%) - Suporte necess√°rio`);
                }
            });
            
            if (alertas.length === 0) {
                relatorio += `‚úÖ Nenhum alerta cr√≠tico identificado\n`;
            } else {
                alertas.forEach(alerta => relatorio += `${alerta}\n`);
            }
            
            relatorio += `\nüéØ RECOMENDA√á√ïES GERENCIAIS\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            relatorio += `‚Ä¢ Realizar reuni√£o individual com servidores inativos\n`;
            relatorio += `‚Ä¢ Agendar sess√£o de d√∫vidas coletiva sobre m√≥dulos avan√ßados\n`;
            relatorio += `‚Ä¢ Considerar incentivos para conclus√£o de m√≥dulos\n`;
            relatorio += `‚Ä¢ Avaliar necessidade de treinamento presencial complementar\n`;
            
            relatorio += `\nüìã M√ìDULOS POR POPULARIDADE\n`;
            relatorio += `‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            
            // Calcular popularidade dos m√≥dulos
            Object.entries(MODULOS_CAPACITACAO).forEach(([moduleId, modulo]) => {
                const usuariosIniciaram = todosUsuarios.filter(user => user.progress[moduleId] > 0).length;
                const usuariosConcluiram = todosUsuarios.filter(user => user.progress[moduleId] === 100).length;
                const taxaConclusao = usuariosIniciaram > 0 ? Math.round(usuariosConcluiram / usuariosIniciaram * 100) : 0;
                
                relatorio += `üìö ${modulo.title}\n`;
                relatorio += `   ‚îú‚îÄ Iniciaram: ${usuariosIniciaram}/${todosUsuarios.length} (${Math.round(usuariosIniciaram/todosUsuarios.length*100)}%)\n`;
                relatorio += `   ‚îú‚îÄ Conclu√≠ram: ${usuariosConcluiram}/${todosUsuarios.length} (${Math.round(usuariosConcluiram/todosUsuarios.length*100)}%)\n`;
                relatorio += `   ‚îî‚îÄ Taxa de Conclus√£o: ${taxaConclusao}%\n\n`;
            });
            
            relatorio += `\n‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ\n`;
            relatorio += `Relat√≥rio gerado automaticamente pelo Sistema DCL\n`;
            relatorio += `¬© Prefeitura Municipal - Departamento de Compras e Licita√ß√µes\n`;
            
            // Exibir relat√≥rio
            const novaJanela = window.open('', '_blank');
            novaJanela.document.write(`
                <html>
                <head>
                    <title>Relat√≥rio Gerencial da Equipe DCL</title>
                    <style>
                        body { font-family: monospace; padding: 20px; background: #f5f5f5; }
                        pre { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
                        @media print { body { background: white; } }
                    </style>
                </head>
                <body>
                    <pre>${relatorio}</pre>
                    <div style="text-align: center; margin-top: 20px;">
                        <button onclick="window.print()" style="padding: 10px 20px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">Imprimir</button>
                        <button onclick="window.close()" style="padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer; margin-left: 10px;">Fechar</button>
                    </div>
                </body>
                </html>
            `);
        }
        
        // ========== A√á√ïES ADMINISTRATIVAS ==========
        function enviarLembretes() {
            if (!usuarioAtual.isAdmin) {
                alert('‚ùå Acesso negado.');
                return;
            }
            
            // Simular envio de lembretes
            const todosUsuarios = Object.values(USUARIOS_SISTEMA);
            let contadorEnviados = 0;
            
            todosUsuarios.forEach(user => {
                const ultimaAtividade = new Date(user.lastActivity);
                const agora = new Date();
                const diffDias = Math.floor((agora - ultimaAtividade) / (1000 * 60 * 60 * 24));
                
                if (diffDias >= 2) {
                    contadorEnviados++;
                }
            });
            
            alert(`üìß Lembretes Enviados!\n\n‚úÖ ${contadorEnviados} lembretes por email\nüì± ${contadorEnviados} notifica√ß√µes no sistema\nüí¨ ${Math.floor(contadorEnviados/2)} mensagens via WhatsApp institucional\n\nüìä Resumo dos lembretes:\n‚Ä¢ M√≥dulos pendentes de conclus√£o\n‚Ä¢ Atividades em atraso\n‚Ä¢ Pr√≥ximas avalia√ß√µes\n‚Ä¢ Dicas de estudo\n\n‚è∞ Pr√≥ximo lembrete autom√°tico em 7 dias.`);
        }
        
        function agendarTreinamento() {
            if (!usuarioAtual.isAdmin) {
                alert('‚ùå Acesso negado.');
                return;
            }
            
            alert(`üìÖ Agendamento de Treinamento Presencial\n\nüéØ SUGEST√ïES BASEADAS NOS DADOS:\n\nüìö Tema Recomendado: "Elabora√ß√£o de Editais"\n   ‚îî‚îÄ 80% da equipe est√° neste m√≥dulo\n   ‚îî‚îÄ Maior n√∫mero de d√∫vidas registradas\n\nüìç Local Sugerido: Sala de Treinamento DCL\nüïê Dura√ß√£o Recomendada: 4 horas\nüë• Participantes: Todos os analistas\n\nüìã AGENDA PROPOSTA:\n‚Ä¢ 08h00-09h30: Conceitos fundamentais\n‚Ä¢ 09h30-09h45: Coffee break\n‚Ä¢ 09h45-11h30: Casos pr√°ticos\n‚Ä¢ 11h30-12h00: Tira-d√∫vidas\n\n‚úÖ Solicita√ß√£o registrada no sistema!\nüìß Convites ser√£o enviados ap√≥s confirma√ß√£o de data.\n\nüí° Tip: Treinamentos presenciais aumentam em 40% a taxa de conclus√£o dos m√≥dulos.`);
        }
        
        // ========== SISTEMA DE SALVAMENTO ==========
        function salvarProgresso() {
            // Em um sistema real, isso salvaria no servidor/banco de dados
            // Aqui, salvamos no localStorage para demonstra√ß√£o
            try {
                const dadosUsuario = {
                    username: usuarioAtual.username,
                    progress: usuarioAtual.progress,
                    lastActivity: new Date().toISOString()
                };
                
                // Atualizar objeto global
                USUARIOS_SISTEMA[usuarioAtual.username] = {
                    ...USUARIOS_SISTEMA[usuarioAtual.username],
                    progress: usuarioAtual.progress,
                    lastActivity: dadosUsuario.lastActivity
                };
                
                console.log('üíæ Progresso salvo:', dadosUsuario);
            } catch (error) {
                console.error('‚ùå Erro ao salvar progresso:', error);
            }
        }
        
        function atualizarInterfaceCompleta() {
            atualizarProgressoGeral();
            popularDashboard();
            popularModulos();
            popularProgresso();
            
            if (usuarioAtual.isAdmin) {
                popularAreaAdministrativa();
            }
        }
        
        // ========== LOGOUT ==========
        function logout() {
            if (confirm('üö™ Tem certeza que deseja sair do sistema?')) {
                // Salvar progresso antes de sair
                salvarProgresso();
                
                // Limpar dados
                usuarioAtual = null;
                
                // Limpar formul√°rio
                document.getElementById('username').value = '';
                document.getElementById('password').value = '';
                
                // Voltar para tela de login
                document.getElementById('mainSystem').classList.add('hidden');
                document.getElementById('loginScreen').classList.remove('hidden');
                
                console.log('üö™ Logout realizado com sucesso');
            }
        }
        
        // ========== INICIALIZA√á√ÉO DO SISTEMA ==========
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üèõÔ∏è Sistema DCL carregado com sucesso!');
            console.log('üìã M√≥dulos dispon√≠veis:', Object.keys(MODULOS_CAPACITACAO).length);
            console.log('üë• Usu√°rios cadastrados:', Object.keys(USUARIOS_SISTEMA).length);
            
            // Verificar se h√° dados salvos (em um sistema real)
            // carregarDadosSalvos();
        });
        
        // ========== FUN√á√ïES DE APOIO ==========
        function carregarDadosSalvos() {
            // Em um sistema real, carregaria dados do servidor
            console.log('üìÇ Verificando dados salvos...');
        }
        
        // Prevenir perda de dados ao fechar a p√°gina
        window.addEventListener('beforeunload', function(e) {
            if (usuarioAtual) {
                salvarProgresso();
            }
        });
        
        // ========== RESPONSIVIDADE E UX ==========
        
        // Auto-ajuste de altura em dispositivos m√≥veis
        function ajustarAlturaDispositivo() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }
        
        window.addEventListener('resize', ajustarAlturaDispositivo);
        window.addEventListener('orientationchange', ajustarAlturaDispositivo);
        ajustarAlturaDispositivo();
        
        // Melhorar experi√™ncia de toque em dispositivos m√≥veis
        if ('ontouchstart' in window) {
            document.body.classList.add('touch-device');
        }
        
        // ========== EASTER EGG ==========
        let clickCount = 0;
        document.addEventListener('click', function(e) {
            if (e.target.textContent === 'üèõÔ∏è') {
                clickCount++;
                if (clickCount === 5) {
                    alert('üéâ Easter Egg!\n\nParab√©ns por descobrir este segredo!\n\nüèÜ Voc√™ √© um verdadeiro explorador do sistema DCL!\n\nüí° Dica: Sistemas bem desenvolvidos sempre t√™m pequenos detalhes especiais para quem presta aten√ß√£o.');
                    clickCount = 0;
                }
            }
        });
    </script>
</body>
</html>